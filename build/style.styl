@-moz-document url-prefix("https://www.youtube.com") {
  i=!important;
  t=transparent;

  #copyright {
    div {
      &::after {
        white-space: pre;
        content: "\aYoutube Tweaks - Version [[VERSION]]";
      }
    }
  }

  ::-webkit-scrollbar {
    width: 4px i;
  }

  ::-webkit-scrollbar-button {
    display: none i;
    border-radius: 0 i;
    height: 13px i;
    background-color: #333 i;
  }

  ::-webkit-scrollbar-thumb {
    border-radius: 2px i;
    background: #555 i;
  }

  ::-webkit-scrollbar-track,
  ::-webkit-scrollbar-corner {
    background-color: #333 i;
  }

  if videos-per-row {
    ytd-rich-grid-renderer,
    :root {
      --ytd-rich-grid-items-per-row: videos-per-row i;
    }

    ytd-rich-section-renderer {
      order: -1;
    }

    #home-container-media {
      .rich-grid-media-skeleton {
        max-width: "calc(100%/%s - 16px)" % videos-per-row i;
        min-width: "calc(100%/%s - 16px)" % videos-per-row i;
      }
    }

    ytd-rich-grid-media[mini-mode],
    ytd-rich-grid-renderer[is-slim-grid] #contents.ytd-rich-grid-renderer {
      max-width: initial;
    }

    ytd-two-column-browse-results-renderer[page-subtype="channels"]:has(ytd-rich-grid-renderer:not([is-shorts-grid])) {
      width: calc(100% - 32px) i;
      max-width: calc(var(--ytd-rich-grid-items-per-row) * (var(--ytd-rich-grid-item-max-width) + var(--ytd-rich-grid-item-margin))) i;
    }

    ytd-rich-item-renderer:nth-child(n + 3):nth-child(-n + {videos-per-row}):has(#video-title.ytd-rich-grid-media)[hidden] {
      display: block i;
    }

    [style="--ytd-rich-shelf-items-count: 3;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "2";
    }

    [style="--ytd-rich-shelf-items-count: 4;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "3";
    }

    [style="--ytd-rich-shelf-items-count: 5;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "4";
    }

    [style="--ytd-rich-shelf-items-count: 6;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "5";
    }

    [style="--ytd-rich-shelf-items-count: 7;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "6";
    }

    [style="--ytd-rich-shelf-items-count: 8;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "7";
    }

    [style="--ytd-rich-shelf-items-count: 9;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "8";
    }

    [style="--ytd-rich-shelf-items-count: 10;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "9";
    }

    [style="--ytd-rich-shelf-items-count: 11;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "10";
    }

    [style="--ytd-rich-shelf-items-count: 12;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "11";
    }
  }

  #content {
    &.ytd-rich-section-renderer {
      margin: 0 8px;
    }
  }

  ytd-rich-item-renderer[rendered-from-rich-grid] {
    width: calc(100% / var(--ytd-rich-grid-items-per-row) - var(--ytd-rich-grid-item-margin) - .01px) i;
    margin-left: calc(var(--ytd-rich-grid-item-margin)/2) i;
    margin-right: calc(var(--ytd-rich-grid-item-margin)/2) i;
  }

  [is-default-grid] {
    & > #contents {
      &.ytd-rich-grid-renderer {
        width: calc(100% - 32px);
        max-width: calc(var(--ytd-rich-grid-items-per-row) * (var(--ytd-rich-grid-item-max-width) + var(--ytd-rich-grid-item-margin)));
      }
    }
  }

  .skeleton-bg-color.ytd-ghost-grid-renderer,
  ytd-rich-item-renderer:has(ytd-ad-slot-renderer) {
    display: none;
  }

  if font-size {
    :root {
      --smaller-font-1-4rem: 1.4rem;
      --smaller-font-2rem: 2rem;
      --smaller-font-1-2rem: 1.2rem;
      --smaller-font-1-8rem: 1.8rem;
    }

    #video-title[class*="style-scope ytd-rich-grid"],
    ytd-game-details-renderer[is-rich-grid]:not([mini-mode]) #title.ytd-game-details-renderer {
      font-size: 1.4rem;
      line-height: 2rem;
    }

    .ytd-rich-grid-media ytd-video-meta-block[rich-meta] .ytd-video-meta-block:is(#byline-container, #metadata-line) {
      font-size: 1.2rem;
      line-height: 1.8rem;
    }
  }

  if no-rounded-corners {
    ytd-watch-flexy[rounded-player-large][default-layout] #ytd-player.ytd-watch-flexy,
    ytd-watch-grid[rounded-player-large][default-layout] #ytd-player.ytd-watch-grid {
      overflow: visible i;
    }

    ytd-thumbnail[size="medium"] a.ytd-thumbnail,
    ytd-thumbnail[size="large"] a.ytd-thumbnail,
    ytd-watch-grid[swatcheroo-split-scroll][default-two-column-layout] #secondary-inner.ytd-watch-grid,
    ytd-playlist-thumbnail[size=large] a.ytd-playlist-thumbnail,
    ytd-playlist-thumbnail[size=large]:before,
    #img,
    img,
    .ytd-feed-filter-chip-bar-renderer,
    #avatar>#img,
    .yt-img-shadow,
    .style-scope,
    yt-touch-feedback-shape,
    :root,
    button,
    .yt-spec-touch-feedback-shape__fill,
    a,
    input {
      border-radius: 0px i;
    }
  }

  if no-shorts {
    #items.ytd-grid-renderer > ytd-grid-video-renderer.ytd-grid-renderer:has([href*="/shorts/"]),
    #items.yt-horizontal-list-renderer > *.yt-horizontal-list-renderer:has([href*="/shorts/"]),
    ytd-rich-section-renderer:has([is-shorts]),
    ytd-rich-item-renderer:has([href*="/shorts/"]):not([is-slim-media]),
    ytd-video-renderer:has([href*="/shorts/"]),
    ytd-notification-renderer:has([href*="/shorts/"]),
    ytd-reel-shelf-renderer:has([href*="/shorts/"]),
    [page-subtype="subscriptions"] ytd-item-section-renderer:has([href*="/shorts/"]),
    #dismissible.ytd-compact-video-renderer:has([href*="/shorts/"]) {
      display: none i;
    }
  }

  if no-promo-bar {
    #player-ads,
    #attached-survey,
    ytd-search-pyv-renderer,
    [page-subtype="home"] ytd-rich-section-renderer,
    ytd-rich-item-renderer:has(ytd-feed-nudge-renderer),
    [page-subtype="subscriptions"] ytd-rich-section-renderer,
    #masthead-ad:has(ytd-banner-promo-renderer),
    tp-yt-paper-dialog:has(yt-mealbar-promo-renderer),
    ytd-rich-item-renderer:has(ytd-ad-slot-renderer),
    ytd-rich-item-renderer:has(ytd-ad-slot-renderer),
    ytd-rich-item-renderer.ytd-rich-grid-row:has(ytd-ad-slot-renderer),
    ytd-rich-item-renderer.ytd-rich-grid-row:has(ytd-feed-nudge-renderer),
    ytd-rich-item-renderer:has(ytd-toggle-button-renderer button[aria-label="Notify me"]),
    ytd-ad-slot-renderer.ytd-item-section-renderer:has(ytd-promoted-sparkles-web-renderer),
    ytd-compact-video-renderer:has(ytd-badge-supported-renderer [aria-label="Members first"]),
    [page-subtype="home"] ytd-rich-item-renderer:has(.ytd-playlist-video-thumbnail-renderer),
    ytd-watch-next-secondary-results-renderer :is(ytd-ad-slot-renderer, ytd-compact-movie-renderer) {
      display: none i;
    }
  }

  if full-titles {
    ytd-grid-video-renderer #video-title.yt-simple-endpoint.ytd-grid-video-renderer,
    ytd-rich-grid-media[mini-mode] #video-title.ytd-rich-grid-media,
    ytd-rich-grid-slim-media[mini-mode] #video-title.ytd-rich-grid-slim-media,
    ytd-video-renderer[is-backstage-video] #video-title.ytd-video-renderer,
    #video-title[class*="ytd"] {
      -webkit-line-clamp: 20 i;
      max-height: 44rem i;
    }
  }

  [is-search] ytd-shelf-renderer.ytd-item-section-renderer:not(ytd-channel-renderer + ytd-shelf-renderer),
  [is-search] ytd-horizontal-card-list-renderer.ytd-item-section-renderer:not(:first-child),
  [is-search] ytd-exploratory-results-renderer.ytd-item-section-renderer {
    display: none if search-dismissible;
  }

  if compact-header-bar {
    html {
      --ytd-toolbar-height: 36px;
    }

    ytd-feed-filter-chip-bar-renderer {
      --ytd-rich-grid-chips-bar-top: var(--ytd-toolbar-height);
    }

    ytd-app {
      &:not([scrolling]) {
        --ytd-masthead-height: var(--ytd-toolbar-height) i;
      }
    }

    .ytd-masthead:is(#container, #background),
    #header.ytd-app,
    ytd-masthead.shell {
      height: var(--ytd-toolbar-height);
    }

    #player {
      &.skeleton {
        &.theater {
          margin-top: var(--ytd-toolbar-height);
        }
      }
    }

    .ytd-searchbox:is(#search-form, #search-icon-legacy) {
      height: 30px;
    }

    yt-icon-button:is(.ytd-topbar-menu-button-renderer, .ytd-masthead, .ytd-notification-topbar-button-renderer),
    #masthead .yt-spec-button-shape-next--icon-only-default,
    #guide-button.ytd-app {
      width: 30px;
      height: 30px;
      padding: 3px;
    }

    yt-icon {
      &.ytd-logo {
        padding-top: 8px;
        padding-bottom: 8px;
      }
    }

    #container.ytd-masthead,
    #header.ytd-app {
      padding: 0 21px;
    }
  }

  [page-subtype="home"] ytd-feed-filter-chip-bar-renderer,
  #home-chips,
  yt-related-chip-cloud-renderer {
    display: none if no-recomendations-bar;
  }

  ytd-rich-section-renderer {
    &:has([is-post]) {
      display: none if no-yt-posts;
    }
  }

  if youtube-watched-badge {
    @font-face {
      font-family: "FontAwesome";
      src: url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?v=4.7.0");
      src: url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0") format("embedded-opentype"),
           url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0") format("woff2"),
           url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff?v=4.7.0") format("woff"),
           url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf?v=4.7.0") format("truetype"),
           url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular") format("svg");
      font-weight: normal;
      font-style: normal;
    }

    ytd-browse {
      yt-formatted-string {
        &.ytd-thumbnail-overlay-playback-status-renderer {
          display: none;
        }
      }
    }

    ytd-thumbnail-overlay-resume-playback-renderer {
      width: 100%;
      height: 100%;
      opacity: .95;
      transition: opacity 200ms ease-out;
      background-color: #030303;
      div#progress {
        &:after {
          content: "\f00c";
          visibility: visible;
          font-family: "FontAwesome";
          left: 50%;
          font-size: 32px;
          opacity: .7;
          position: absolute;
          top: 50%;
          margin-top: -14px;
          margin-left: -14px;
          color: #fff;
        }
      }
      &:hover {
        opacity: 0 i;
      }
    }
    #progress {
      &.ytd-thumbnail-overlay-resume-playback-renderer {
        height: 100%;
        background: #111 i;
      }
    }
  }
}

@-moz-document regexp("https?://www.youtube.com/watch.*"), regexp("https?://www.youtube.com/clip.*") {
  if theater {
    ytd-watch-flexy[theater]:not([fullscreen]) {
      #full-bleed-container {
        &.ytd-watch-flexy {
          height: 100vh;
          max-height: none;
          margin-top: calc(0px - var(--ytd-toolbar-height));
        }
      }
    }

    ytd-watch-flexy[fixed-panels] {
      #chat {
        &.ytd-watch-flexy {
          top: 0;
        }
      }
    }

    #player {
      &.skeleton {
        &.theater {
          height: 100vh;
          margin-top: 0;
          max-height: none;
        }
      }
    }

    #masthead[is-watch-page][theater]:not([fullscreen]) {
      position: absolute;
      transform: translateY(calc(0px - var(--ytd-toolbar-height)));
      padding-bottom: 20px;
      transition: transform .3s ease, padding .3s ease;
      &:hover {
        transform: initial;
        padding-bottom: 0;
      }
    }
  }

  if fill-player {
    video {
      position: static i;
      width: 100% i;
      height: 100vh i;
      transform: scaleX(1) i;
      object-fit: fill i;
    }
  }

  if hide-dl-clip-thanks-button {
    ytd-download-button-renderer {
      display: none i;
    }

    #flexible-item-buttons {
      [aria-label="Promote"],
      [aria-label="Clip"],
      [aria-label="Thanks"],
      [title="Show support with Super Thanks"] {
        display: none i;
      }
    }
  }

  if netflix-subtitles {
    @font-face {
      font-family: "Netflix Sans";
      font-weight: 100;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Th.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Th.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 300;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Lt.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Lt.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 400;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Rg.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Rg.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 700;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Md.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Md.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 800;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Bd.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Bd.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 900;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Blk.woff2") format("woff2"),
           url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Blk.woff") format("woff");
    }

    .ytp-caption-segment {
      font-family: "Netflix Sans", sans-serif i;
      font-weight: 700 i;
      background: none i;
      text-shadow: #000 0 0 0.2em i;
    }
  }
}
