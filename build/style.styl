@-moz-document url-prefix("https://www.youtube.com") {
  i=!important;
  t=transparent;

  #copyright div::after {
    white-space: pre;
    content: "\aYoutube Tweaks - Version [[VERSION]]";
  }

  ::-webkit-scrollbar {
    width: 4px i;
  }

  ::-webkit-scrollbar-button {
    display: none i;
    border-radius: 0 i;
    height: 13px i;
    background-color: #333 i;
  }

  ::-webkit-scrollbar-thumb {
    border-radius: 2px i;
    background: #555 i;
  }

  ::-webkit-scrollbar-track,
  ::-webkit-scrollbar-corner {
    background-color: #333 i;
  }

  if videos-per-row {
    ytd-rich-grid-renderer,
    :root {
      --ytd-rich-grid-items-per-row: videos-per-row i;
    }

    ytd-rich-section-renderer {
      order: -1;
    }

    #home-container-media .rich-grid-media-skeleton {
      max-width: "calc(100%/%s - 16px)" % videos-per-row i;
      min-width: "calc(100%/%s - 16px)" % videos-per-row i;
    }

    ytd-rich-grid-media[mini-mode],
    ytd-rich-grid-renderer[is-slim-grid] #contents.ytd-rich-grid-renderer {
      max-width: initial;
    }

    ytd-two-column-browse-results-renderer[page-subtype="channels"]:has(ytd-rich-grid-renderer:not([is-shorts-grid])) {
      width: calc(100% - 32px) i;
      max-width: calc(var(--ytd-rich-grid-items-per-row) * (var(--ytd-rich-grid-item-max-width) + var(--ytd-rich-grid-item-margin))) i;
    }

    ytd-rich-item-renderer:nth-child(n + 3):nth-child(-n + {videos-per-row}):has(#video-title.ytd-rich-grid-media)[hidden] {
      display: block i;
    }

    [style="--ytd-rich-shelf-items-count: 3;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "2";
    }

    [style="--ytd-rich-shelf-items-count: 4;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "3";
    }

    [style="--ytd-rich-shelf-items-count: 5;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "4";
    }

    [style="--ytd-rich-shelf-items-count: 6;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "5";
    }

    [style="--ytd-rich-shelf-items-count: 7;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "6";
    }

    [style="--ytd-rich-shelf-items-count: 8;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "7";
    }

    [style="--ytd-rich-shelf-items-count: 9;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "8";
    }

    [style="--ytd-rich-shelf-items-count: 10;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "9";
    }

    [style="--ytd-rich-shelf-items-count: 11;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "10";
    }

    [style="--ytd-rich-shelf-items-count: 12;"]:has(#video-title.ytd-rich-grid-media) .expand-collapse-button.ytd-rich-shelf-renderer {
      display: none if videos-per-row > "11";
    }
  }

  #content.ytd-rich-section-renderer {
    margin: 0 8px;
  }

  ytd-rich-item-renderer[rendered-from-rich-grid] {
    width: calc(100% / var(--ytd-rich-grid-items-per-row) - var(--ytd-rich-grid-item-margin) - .01px) i;
    margin-left: calc(var(--ytd-rich-grid-item-margin)/2) i;
    margin-right: calc(var(--ytd-rich-grid-item-margin)/2) i;
  }

  [is-default-grid] > #contents.ytd-rich-grid-renderer {
    width: calc(100% - 32px);
    max-width: calc(var(--ytd-rich-grid-items-per-row) * (var(--ytd-rich-grid-item-max-width) + var(--ytd-rich-grid-item-margin)));
  }

  .skeleton-bg-color.ytd-ghost-grid-renderer,
  ytd-rich-item-renderer:has(ytd-ad-slot-renderer) {
    display: none;
  }

  if font-size {
    :root {
      --smaller-font-1-4rem: 1.4rem;
      --smaller-font-2rem: 2rem;
      --smaller-font-1-2rem: 1.2rem;
      --smaller-font-1-8rem: 1.8rem;
    }

    #video-title[class*="style-scope ytd-rich-grid"],
    ytd-game-details-renderer[is-rich-grid]:not([mini-mode]) #title.ytd-game-details-renderer {
      font-size: 1.4rem;
      line-height: 2rem;
    }

    .ytd-rich-grid-media ytd-video-meta-block[rich-meta] .ytd-video-meta-block:is(#byline-container, #metadata-line) {
      font-size: 1.2rem;
      line-height: 1.8rem;
    }
  }

  if no-rounded-corners {
    ytd-watch-flexy[rounded-player-large][default-layout] #ytd-player.ytd-watch-flexy,
    ytd-watch-grid[rounded-player-large][default-layout] #ytd-player.ytd-watch-grid {
      overflow: visible i;
    }

    ytd-thumbnail[size="medium"] a.ytd-thumbnail,
    ytd-thumbnail[size="large"] a.ytd-thumbnail,
    ytd-watch-grid[swatcheroo-split-scroll][default-two-column-layout] #secondary-inner.ytd-watch-grid,
    ytd-playlist-thumbnail[size=large] a.ytd-playlist-thumbnail,
    ytd-playlist-thumbnail[size=large]:before,
    #img,
    img,
    .ytd-feed-filter-chip-bar-renderer,
    #avatar>#img,
    .yt-img-shadow,
    .style-scope,
    yt-touch-feedback-shape,
    :root,
    button,
    .yt-spec-touch-feedback-shape__fill,
    a,
    input {
      border-radius: 0px i;
    }
  }

  if no-shorts {
    #items.ytd-grid-renderer > ytd-grid-video-renderer.ytd-grid-renderer:has([href*="/shorts/"]),
    #items.yt-horizontal-list-renderer > *.yt-horizontal-list-renderer:has([href*="/shorts/"]),
    ytd-rich-section-renderer:has([is-shorts]),
    ytd-rich-item-renderer:has([href*="/shorts/"]):not([is-slim-media]),
    ytd-video-renderer:has([href*="/shorts/"]),
    ytd-notification-renderer:has([href*="/shorts/"]),
    ytd-reel-shelf-renderer:has([href*="/shorts/"]),
    [page-subtype="subscriptions"] ytd-item-section-renderer:has([href*="/shorts/"]),
    #dismissible.ytd-compact-video-renderer:has([href*="/shorts/"]) {
      display: none i;
    }
  }

  if full-titles {
    ytd-grid-video-renderer #video-title.yt-simple-endpoint.ytd-grid-video-renderer,
    ytd-rich-grid-media[mini-mode] #video-title.ytd-rich-grid-media,
    ytd-rich-grid-slim-media[mini-mode] #video-title.ytd-rich-grid-slim-media,
    ytd-video-renderer[is-backstage-video] #video-title.ytd-video-renderer,
    #video-title[class*="ytd"] {
      -webkit-line-clamp: 20 i;
      max-height: 44rem i;
    }
  }

  if compact-header-bar {
    html {
      --ytd-toolbar-height: 36px;
    }

    ytd-feed-filter-chip-bar-renderer {
      --ytd-rich-grid-chips-bar-top: var(--ytd-toolbar-height);
    }

    ytd-app:not([scrolling]) {
      --ytd-masthead-height: var(--ytd-toolbar-height) i;
    }

    .ytd-masthead:is(#container, #background),
    #header.ytd-app,
    ytd-masthead.shell {
      height: var(--ytd-toolbar-height);
    }

    #player.skeleton.theater {
      margin-top: var(--ytd-toolbar-height);
    }

    .ytd-searchbox:is(#search-form, #search-icon-legacy) {
      height: 30px;
    }

    yt-icon-button:is(.ytd-topbar-menu-button-renderer, .ytd-masthead, .ytd-notification-topbar-button-renderer),
    #masthead .yt-spec-button-shape-next--icon-only-default,
    #guide-button.ytd-app {
      width: 30px;
      height: 30px;
      padding: 3px;
    }

    yt-icon.ytd-logo {
      padding-top: 8px;
      padding-bottom: 8px;
    }

    #container.ytd-masthead,
    #header.ytd-app {
      padding: 0 21px;
    }
  }

  [page-subtype="home"] ytd-feed-filter-chip-bar-renderer,
  #home-chips,
  yt-related-chip-cloud-renderer {
    display: none if no-recomendations-bar;
  }

  ytd-rich-section-renderer:has([is-post]) {
    display: none if no-yt-posts;
  }

  if youtube-watched-badge {
    @font-face {
      font-family: "FontAwesome";
      font-weight: normal;
      font-style: normal;
      src: url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?v=4.7.0");
      src: url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0") format("embedded-opentype"), url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0") format("woff2"), url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff?v=4.7.0") format("woff"), url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf?v=4.7.0") format("truetype"), url("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular") format("svg");
    }

    .ytd-browse yt-formatted-string.ytd-thumbnail-overlay-playback-status-renderer {
      display: none;
    }

    ytd-thumbnail-overlay-resume-playback-renderer {
      width: 100%;
      height: 100%;
      background-color: #030303;
      opacity: 0.85;
      transition: opacity 200ms ease-out;
    }

    ytd-thumbnail-overlay-resume-playback-renderer:before {
      display: flex;
      position: absolute;
      top: 0;
      z-index: 100;
      width: 100%;
      height: 100%;
      font-family: "FontAwesome";
      font-size: 32px;
      color: #999;
      opacity: 0.7;
      transition: 0.1s ease;
      content: url("https://raw.githubusercontent.com/StylusThemes/YouTube-Theater/master/images/watched.png");
      align-items: center;
      justify-content: center;
    }

    ytd-compact-video-renderer:hover #overlays,
    ytd-video-renderer:hover #overlays,
    ytd-grid-video-renderer:hover #overlays,
    ytd-playlist-video-renderer:hover #overlays,
    ytd-thumbnail:hover #overlays {
      opacity: 0;
    }

    ytd-thumbnail #overlays {
      height: 100%;
      transition: 0.2s ease;
    }

    #progress.ytd-thumbnail-overlay-resume-playback-renderer {
      height: 100%;
      background-color: #3a0909;
      opacity: 1;
    }

    .ytd-browse div#progress:after {
      color: #fff;
    }
  }
}

@-moz-document regexp("https?://www.youtube.com/watch.*"), regexp("https?://www.youtube.com/clip.*") {
  if theater {
    ytd-watch-flexy[full-bleed-player]:not([fullscreen])[theater] #full-bleed-container.ytd-watch-flexy {
      height: 100vh;
      max-height: none;
      margin-top: calc(0px - var(--ytd-toolbar-height));
    }

    #masthead-container.ytd-app [is-watch-page][theater]:not([fullscreen]) {
      opacity: 0;
      transition: opacity 0.1s ease-in;
    }

    #masthead-container.ytd-app:hover [theater]:not([fullscreen]) {
      opacity: 1;
      transition: opacity 0.1s ease-out;
    }

    [theater]:not([fullscreen]) .ytp-cards-button-icon,
    [theater]:not([fullscreen]) .ytp-share-icon,
    [theater]:not([fullscreen]) .ytp-tooltip-text,
    [theater]:not([fullscreen]) .ytp-cards-teaser,
    [theater]:not([fullscreen]) .ytp-exp-ppp-update .ytp-paid-content-overlay-link,
    [theater]:not([fullscreen]) .ytp-sfn,
    [theater]:not([fullscreen]) .ytp-drawer {
      margin-top: var(--ytd-toolbar-height);
    }
  }

  if fill-player {
    video {
      position: static i;
      width: 100% i;
      height: 100vh i;
      transform: scaleX(1) i;
      object-fit: fill i;
    }
  }

  if hide-dl-clip-thanks-button {
    ytd-download-button-renderer {
      display: none i;
    }

    #flexible-item-buttons [aria-label="Promote"] {
      display: none i;
    }

    #flexible-item-buttons [aria-label="Clip"] {
      display: none i;
    }

    #flexible-item-buttons [aria-label="Thanks"],
    #flexible-item-buttons [title="Show support with Super Thanks"] {
      display: none i;
    }
  }

  if netflix-subtitles {
    @font-face {
      font-family: "Netflix Sans";
      font-weight: 100;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Th.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Th.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 300;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Lt.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Lt.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 400;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Rg.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Rg.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 700;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Md.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Md.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 800;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Bd.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Bd.woff") format("woff");
    }

    @font-face {
      font-family: "Netflix Sans";
      font-weight: 900;
      src: url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Blk.woff2") format("woff2"), url("https://assets.nflxext.com/ffe/siteui/fonts/netflix-sans/v3/NetflixSans_W_Blk.woff") format("woff");
    }

    .ytp-caption-segment {
      font-family: "Netflix Sans", sans-serif i;
      font-weight: 700 i;
      background: none i;
      text-shadow: rgba(0, 0, 0, 1) 0 0 0.2em i;
    }
  }
}
